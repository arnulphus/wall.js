!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Wall=t():e.Wall=t()}(this,function(){return function(e){function t(n){if(i[n])return i[n].exports;var s=i[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var i={};return t.m=e,t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,i){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}function s(e){return Array.isArray(e)?e:Array.from(e)}function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=r(["wrapper"],["wrapper"]),u=r(["sections"],["sections"]),l=i(1),h=i(2),d=i(3),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(d);i(4);var p="section",m="data-wall-section-nav",S="data-wall-nav-index",y="data-wall-slide",v={wrapperZIndex:1,sectionAnimateDuration:1,easeFunction:"easeInOut",loopToBottom:!1,loopToTop:!1,sectionNavItemActiveClass:"active",animatingClass:"animating",currentClass:"current"},w=document.getElementsByTagName("body")[0],g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,l.throwNewError)(a),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v;o(this,e),this.wrapper="string"==typeof t?document.querySelector(t):t,this.sections=this.wrapper.children.length?(0,l.toArray)(this.wrapper.children):(0,l.throwNewError)(u),this.currentSection=void 0,this.restSections=void 0,this.currentSlides=void 0,this.currentSlide=void 0,this.restSlides=void 0,this.currentScreenPosition=0,this.translateZ=h.hasTransform3d?"translateZ(0)":"",this.size={X:0,Y:0},this.options=(0,l.merge)(v,i),this.navElements=(0,l.toArray)(document.querySelectorAll("["+m+"]")),this.easeFunction="string"==typeof this.options.easeFunction?f[this.options.easeFunction]:this.options.easeFunction,this.lastTime=null,this.requestId=null,this.isAnimating=!1,this.isToBack=!1,this.screenType=p,this._init()}return c(e,[{key:"_init",value:function(){var e=this;this._refresh(!0),window.addEventListener("resize",function(){e._setupSize()._cssWrapper()}),document.addEventListener("keydown",this._handleKeyDown.bind(this))}},{key:"_refresh",value:function(e){var t=this;e&&this._setupSize()._cssBody()._cssWrapper()._setupSections()._cssSections()._queue(this.sections)._setupSlides()._setupSectionNav(),(0,h.cAF)(this.requestId),this.isAnimating=!1,(0,l.removeClass)(this.currentSection,this.options.animatingClass),this.sections.forEach(function(e){return(0,l.removeClass)(e,t.options.currentClass)});var i=s(this.sections);this.currentSection=i[0],this.restSections=i.slice(1),(0,l.addClass)(this.currentSection,this.options.currentClass),this.currentSlides.length&&this.currentSlide&&((0,l.removeClass)(this.currentSlide,this.options.animatingClass),this.currentSlides.forEach(function(e){return(0,l.removeClass)(e,t.options.currentClass)}));var n=s(this.currentSlides);return this.currentSlide=n[0],this.restSlides=n.slice(1),this.currentSlide&&(0,l.addClass)(this.currentSlide,this.options.currentClass),this._renderSectionNavs(),this}},{key:"_setupSize",value:function(){return this.size.X=(0,h.getScreenWidth)(),this.size.Y=(0,h.getScreenHeight)(),this}},{key:"_setupSections",value:function(){var e=this,t=s(this.sections);return this.currentSection=t[0],this.restSections=t.slice(1),this.sections.forEach(function(t,i){t.setAttribute("data-wall-section-index",i+1),t.addEventListener(h.mousewheelEvent,e._handleWheelEvent.bind(e))}),this}},{key:"_handleKeyDown",value:function(e){var t=this.currentSection,i=t.scrollTop,n=t.scrollHeight,s=t.clientHeight;switch(e.keyCode){case 34:case 40:n-i<=s&&this.nextSection();break;case 33:case 38:0===i&&this.prevSection();break;case 37:this.currentSlide&&this.prevSlide();break;case 39:this.currentSlide&&this.nextSlide();break;case 36:this.goToSection(1);case 35:this.goToSection(this.sections.length)}}},{key:"_handleWheelEvent",value:function(e){var t=this.currentSection,i=t.scrollTop,n=t.scrollHeight,s=t.clientHeight,r=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail));return n-i<=s&&-1===r&&this.nextSection(),0===i&&1===r&&this.prevSection(),this}},{key:"_setupSectionNav",value:function(){var e=this;return this.navElements&&this.navElements.length&&this.navElements.forEach(function(t){t.style.zIndex=e.options.wrapperZIndex+1,(0,l.toArray)(t.children).forEach(function(t,i){t.setAttribute(S,i+1),t.addEventListener("click",function(){e.goToSection(t.getAttribute(S))})})}),this}},{key:"_setupSlides",value:function(){return this.currentSlides=(0,l.toArray)(this.currentSection.querySelectorAll("["+y+"]")),this.sections.forEach(function(e){var t=(0,l.toArray)(e.querySelectorAll("["+y+"]")),i=(0,l.toArray)(e.querySelectorAll("[data-wall-slide-arrow]"));t.length&&(t.forEach(function(e,t){e.style.position="absolute",e.style.top=0,e.style.overflowX="hidden",e.style.overflowY="auto",e.style.right=0,e.style.bottom=0,e.style.left=0,e.setAttribute("data-wall-slide-index",t+1)}),t.reverse().forEach(function(e,t){return e.style.zIndex=t+1}),i.length&&i.forEach(function(e){return e.style.zIndex=t.length+1}))}),this}},{key:"_cssBody",value:function(){return w.style.margin=0,w.style.overflow="hidden",this}},{key:"_cssWrapper",value:function(){return this.wrapper.style.position="relative",this.wrapper.style.overflow="hidden",this.wrapper.style.width="100%",this.wrapper.style.height=this.size.Y+"px",this.wrapper.style.zIndex=this.options.wrapperZIndex,this}},{key:"_cssSections",value:function(){return this.sections.forEach(function(e){e.style.position="absolute",e.style.top=0,e.style.right=0,e.style.bottom=0,e.style.left=0,e.style.overflowX="hidden",e.style.overflowY="auto"}),this}},{key:"_queue",value:function(e){var t=this;return e.reverse().forEach(function(e,t){e.style.zIndex=t+1}),e.reverse(),e.forEach(function(e){return t._renderSectionPosition(e,0)}),this}},{key:"_resetCurrentSlides",value:function(){var e=s(this.sections);this.currentSection=e[0],this.restSections=e.slice(1),this.currentSlides=(0,l.toArray)(this.currentSection.querySelectorAll("["+y+"]")).sort(function(e,t){return+t.style.zIndex-+e.style.zIndex}),this.currentSlide&&(0,l.removeClass)(this.currentSlide,this.options.currentClass);var t=s(this.currentSlides);return this.currentSlide=t[0],this.restSlides=t.slice(1),this.currentSlide&&(0,l.addClass)(this.currentSlide,this.options.currentClass),this}},{key:"_refreshAnimateStatus",value:function(e){return this.isToBack=e,(0,h.cAF)(this.requestId),this.currentScreenPosition=this.isToBack?100:0,this.isAnimating=!0,this.lastTime=Date.now(),this.screenType===p&&(0,l.addClass)(this.currentSection,this.options.animatingClass),this.currentSlide&&"slide"===this.screenType&&(0,l.addClass)(this.currentSlide,this.options.animatingClass),this}},{key:"_animateScreen",value:function(e,t){var i=Date.now(),n=(i-this.lastTime)/1e3;return e.style.zIndex=t.length+1,this._updateCurrentScreenPosition(n)._renderSectionPosition(e,this.currentScreenPosition),this.currentScreenPosition>99.9&&!this.isToBack||this.currentScreenPosition<.1&&this.isToBack?(this._refresh()._queue(t),this.screenType===p&&this._resetCurrentSlides(),this):this.isAnimating?this.requestId=(0,h.rAF)(this._animateScreen.bind(this,e,t)):void 0}},{key:"_updateCurrentScreenPosition",value:function(e){var t=this.screenType===p?+this.currentSection.getAttribute("data-wall-animate-duration"):+this.currentSlide.getAttribute("data-wall-animate-duration"),i=t||this.options.sectionAnimateDuration,n=this.isToBack?0:100;return this.currentScreenPosition=this.easeFunction(e,this.currentScreenPosition,n-this.currentScreenPosition,i),this}},{key:"_renderSectionPosition",value:function(e,t){switch(this.screenType){case p:e.style[h.transformProp]="translate(0, -"+t+"%) "+this.translateZ;break;case"slide":e.style[h.transformProp]="translate(-"+t+"%, 0) "+this.translateZ;break;default:e.style[h.transformProp]="translate(0, -"+t+"%) "+this.translateZ}}},{key:"getCurrentSectionIndex",value:function(){return this.currentSection.getAttribute("data-wall-section-index")}},{key:"_renderSectionNavs",value:function(){var e=this;if(this.navElements&&this.navElements.length){var t=this.options.sectionNavItemActiveClass;this.navElements.forEach(function(i){var n=(0,l.toArray)(i.children);n.forEach(function(e){return(0,l.removeClass)(e,t)});var s=n.find(function(t){return t.getAttribute(S)===e.getCurrentSectionIndex()});(0,l.addClass)(s,t)})}}},{key:"prevSection",value:function(){if((this.options.loopToBottom||1!=this.getCurrentSectionIndex())&&!this.isAnimating){var e=this.sections.reverse(),t=s(e);this.currentSection=t[0],this.restSections=t.slice(1),this.sections=[this.currentSection].concat(n(this.restSections.reverse())),this.screenType=p,this._refreshAnimateStatus(!0)._animateScreen(this.currentSection,this.sections)}}},{key:"nextSection",value:function(){(this.options.loopToTop||this.getCurrentSectionIndex()!=this.sections.length)&&(this.isAnimating||(this.sections=[].concat(n(this.restSections),[this.currentSection]),this.screenType=p,this._refreshAnimateStatus(!1)._animateScreen(this.currentSection,this.sections)))}},{key:"goToSection",value:function(e){if(e!==this.getCurrentSectionIndex()&&!this.isAnimating){this.sections=(0,l.toArray)(this.wrapper.children);var t=this.sections.find(function(t){return t.getAttribute("data-wall-section-index")==e}),i=this.sections.slice(0,e-1),s=this.sections.slice(e);this.sections=[t].concat(n(s),n(i)),this._refreshAnimateStatus(e<this.getCurrentSectionIndex()),this.isToBack?this.currentSection=t:this._queue(this.sections),this.screenType=p,this._animateScreen(this.currentSection,this.sections)}}},{key:"prevSlide",value:function(){if(!this.isAnimating){var e=this.currentSlides.reverse(),t=s(e);this.currentSlide=t[0],this.restSlides=t.slice(1),this.currentSlides=[this.currentSlide].concat(n(this.restSlides.reverse())),this.screenType="slide",this._refreshAnimateStatus(!0)._animateScreen(this.currentSlide,this.currentSlides)}}},{key:"nextSlide",value:function(){this.isAnimating||(this.currentSlides=[].concat(n(this.restSlides),[this.currentSlide]),this.screenType="slide",this._refreshAnimateStatus(!1)._animateScreen(this.currentSlide,this.currentSlides))}}]),e}();e.exports=g},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(t.throwNewError=function(e){throw new Error(e+" is required")},t.toArray=function(e){return Array.prototype.slice.call(e)},t.merge=function(e,t){return Object.keys(t).forEach(function(i){e[i]=t[i]}),e},function(e,t){return e.classList?e.classList.contains(t):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))});t.addClass=function(e,t){e.classList?e.classList.add(t):n(e,t)||(e.className+=" "+t)},t.removeClass=function(e,t){if(e.classList)e.classList.remove(t);else if(n(e,t)){var i=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(i," ")}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=document.createElement("div");t.hasTransform3d="WebkitPerspective"in n.style||"MozPerspective"in n.style||"msPerspective"in n.style||"OPerspective"in n.style||"perspective"in n.style,t.transformProp=function(){if(!("transform"in n.style)){var e=["Webkit","Moz","ms"];for(var t in e)if(console.log(e[t]),e[t]+"Transform"in n.style)return e[t]+"Transform"}return"transform"}(),t.mousewheelEvent="onmousewheel"in document?"mousewheel":"DOMMouseScroll",t.rAF=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},t.cAF=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(e){clearTimeout(e)},t.getScreenWidth=function(){return window.innerWidth&&document.documentElement.clientWidth?Math.min(window.innerWidth,document.documentElement.clientWidth):window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth},t.getScreenHeight=function(){return window.innerHeight&&document.documentElement.clientHeight?Math.min(window.innerHeight,document.documentElement.clientHeight):window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.linear=function(e,t,i,n){return i*e/n+t},t.easeIn=function(e,t,i,n){return e/=n,i*e*e+t},t.easeOut=function(e,t,i,n){return e/=n,-i*e*(e-2)+t},t.easeInOut=function(e,t,i,n){return(e/=n/2)<1?i/2*e*e*e*e+t:(e-=2,-i/2*(e*e*e*e-2)+t)}},function(e,t,i){"use strict";Array.prototype.find||(Array.prototype.find=function(e){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,i=Object(this),n=i.length>>>0,s=arguments[1],r=0;r<n;r++)if(t=i[r],e.call(s,t,r,i))return t})}])});